# üîß –®–≤–∏–¥–∫–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è: –î–∞–Ω—ñ –∑ user_id = NULL

## –ü—Ä–æ–±–ª–µ–º–∞

–Ø–∫—â–æ –≤ –±–∞–∑—ñ —î —Å—Ç–∞—Ä—ñ –∑–∞–ø–∏—Å–∏ –∑ `user_id = NULL`, –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è –≤—Å—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º, –Ω–∞–≤—ñ—Ç—å –ø—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è RLS (—è–∫—â–æ –ø–æ–ª—ñ—Ç–∏–∫–∏ –Ω–µ –º—ñ—Å—Ç—è—Ç—å `AND user_id IS NOT NULL`).

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è (3 –∫—Ä–æ–∫–∏)

### –ö—Ä–æ–∫ 1: –í–∏–¥–∞–ª–∏—Ç–∏ –∞–±–æ –ø—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ —Å—Ç–∞—Ä—ñ –∑–∞–ø–∏—Å–∏

–í—ñ–¥–∫—Ä–∏–π—Ç–µ Supabase Dashboard ‚Üí SQL Editor —ñ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –æ–¥–∏–Ω –∑ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤:

**–í–ê–†–Ü–ê–ù–¢ A: –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ä—ñ –¥–∞–Ω—ñ (—è–∫—â–æ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ)**
```sql
DELETE FROM transactions WHERE user_id IS NULL;
DELETE FROM cards WHERE user_id IS NULL;
```

**–í–ê–†–Ü–ê–ù–¢ B: –ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ –≤–∞—à–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É**
```sql
-- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –≥–æ—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç SUPABASE_ASSIGN_USER_ID.sql
-- –ê–±–æ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –≤—Ä—É—á–Ω—É:
UPDATE transactions SET user_id = '–í–ê–®_USER_ID' WHERE user_id IS NULL;
UPDATE cards SET user_id = '–í–ê–®_USER_ID' WHERE user_id IS NULL;
```

**–Ø–∫ –∑–Ω–∞–π—Ç–∏ –≤–∞—à user_id:**
1. –£–≤—ñ–π–¥—ñ—Ç—å –≤ –¥–æ–¥–∞—Ç–æ–∫ —á–µ—Ä–µ–∑ Google
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Console (F12)
3. –í–∏–∫–æ–Ω–∞–π—Ç–µ:
   ```javascript
   const { data } = await supabase.auth.getUser()
   console.log(data.user.id)
   ```
4. –°–∫–æ–ø—ñ—é–π—Ç–µ ID

### –ö—Ä–æ–∫ 2: –û–Ω–æ–≤–∏—Ç–∏ RLS –ø–æ–ª—ñ—Ç–∏–∫–∏

–í–∏–∫–æ–Ω–∞–π—Ç–µ –æ–Ω–æ–≤–ª–µ–Ω–∏–π —Å–∫—Ä–∏–ø—Ç `SUPABASE_RLS_SETUP.sql` (—Ç–µ–ø–µ—Ä –∑ `AND user_id IS NOT NULL` –≤ –ø–æ–ª—ñ—Ç–∏–∫–∞—Ö).

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞

```sql
-- –ú–∞—î –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ 0 –¥–ª—è –æ–±–æ—Ö –∑–∞–ø–∏—Ç—ñ–≤:
SELECT COUNT(*) FROM transactions WHERE user_id IS NULL;
SELECT COUNT(*) FROM cards WHERE user_id IS NULL;
```

## –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

- ‚úÖ –°—Ç–∞—Ä—ñ –∑–∞–ø–∏—Å–∏ –∑ NULL –Ω–µ –±—É–¥—É—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—å
- ‚úÖ RLS –±—É–¥–µ –±–ª–æ–∫—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Å–∏ –∑ NULL
- ‚úÖ –ö–æ–∂–µ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–±–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó –¥–∞–Ω—ñ

